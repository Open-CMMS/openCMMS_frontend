
<div class="login-background" style="height: 100%;">
    <!-- Sign in-->
    <div class="d-flex col-md-6 offset-md-3 justify-content-center p-md-5" *ngIf="!firstUser">
        <div class="card" style="box-shadow: 0 0 1em;">
            <h4 class="card-header text-center">Connect to OpenCMMS</h4>
            <div class="card-body">
                <div class="d-flex row justify-content-center mb-2">
                    <img class="rounded-circle p-3" src="../../../favicon.png" width="150px" style="box-shadow: inset 0 0 1rem rgb(4, 45, 134);"/>
                </div>
                <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
                    <div class="form-group">
                        <label for="username">Username</label>
                        <input id="username" type="text" formControlName="username" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.username.errors }" />
                        <div *ngIf="submitted && f.username.errors" class="invalid-feedback">
                            <div *ngIf="f.username.errors.required">Username is required</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" formControlName="password" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.password.errors }" />
                        <div *ngIf="submitted && f.password.errors" class="invalid-feedback">
                            <div *ngIf="f.password.errors.required">Password is required</div>
                        </div>
                    </div>
                    <button [disabled]="loading" class="btn btn-primary">
                        <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
                        Login
                    </button>
                    <div *ngIf="error" class="alert alert-danger mt-3 mb-0">{{error}}</div>
                </form>
              <div class="text-right">
                <a [routerLink]="['/forgot-password']" routerLinkActive="active">Forgot password?</a>
              </div>
            </div>
        </div>
    </div>
    
    <!-- Sign up-->
    
    <div class="col-md-6 offset-md-3 mt-md-5" *ngIf="firstUser">
        <div class="card" style="box-shadow: 0 0 1em;">
            <h4 class="card-header text-center">Sign up as admin to OpenCMMS</h4>
            <div class="card-body">
                <div class="d-flex row justify-content-center mb-2">
                    <img class="rounded-circle p-3" src="../../../favicon.png" width="150px" style="box-shadow: inset 0 0 1rem rgb(4, 45, 134);"/>
                </div>
                <form [formGroup]="createForm" (ngSubmit)="onCreateUser()">
                    <div class="form-group">
                        <label for="first_name">First Name :</label>
                        <input type="text" id="first_name" class="form-control" formControlName="firstName"
                        [ngClass]="{ 'is-invalid': submitted && this.createForm.controls.firstName.errors }" />
                        <div *ngIf="submitted && this.createForm.controls.firstName.errors"
                        class="invalid-feedback">
                            <div *ngIf="this.createForm.controls.firstName.errors.required">
                                First Name is required
                            </div>
                        </div>
                    </div>
    
                    <div class="form-group">
                        <label for="last_name">Last Name :</label>
                        <input type="text" id="last_name" class="form-control" formControlName="lastName"
                        [ngClass]="{ 'is-invalid': submitted && this.createForm.controls.lastName.errors }" />
                        <div *ngIf="submitted && this.createForm.controls.lastName.errors" class="invalid-feedback">
                            <div *ngIf="this.createForm.controls.lastName.errors.required">
                                Last Name is required
                            </div>
                        </div>
                    </div>
    
                    <div class="form-group">
                        <label for="email">Email Address :</label>
                        <input type="text" id="email" class="form-control" formControlName="email"
                        [ngClass]="{ 'is-invalid': submitted && this.createForm.controls.email.errors }" />
                        <div *ngIf="submitted && this.createForm.controls.email.errors" class="invalid-feedback">
                            <div *ngIf="this.createForm.controls.email.errors.required">
                                Email is required
                            </div>
                            <div *ngIf="this.createForm.controls.email.errors.email">
                                Email must be a valid email address
                            </div>
                        </div>
                    </div>
    
                    <div class="form-group">
                        <label for="password">Password :</label>
                        <input type="password" id="password" class="form-control" formControlName="password"
                        [ngClass]="{ 'is-invalid': submitted && this.createForm.controls.password.errors }" />
                        <div *ngIf="submitted && this.createForm.controls.password.errors" class="invalid-feedback">
                            <div *ngIf="this.createForm.controls.password.errors.required">
                                Password is required
                            </div>
                            <div *ngIf="this.createForm.controls.password.errors.minlength">
                                Password must be at least 7 characters
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="confPassword" >Confirm Password :</label>
                        <input type="password" id="confPassword" class="form-control" formControlName="confPassword"
                        [ngClass]="{ 'is-invalid': submitted && this.createForm.controls.confPassword.errors }" />
                        <div *ngIf="submitted && this.createForm.controls.confPassword.errors" class="invalid-feedback">
                            <div *ngIf="this.createForm.controls.confPassword.errors.required">
                                Confirm Password is required
                            </div>
                            <div *ngIf="this.createForm.controls.confPassword.errors.CrossMatch">
                                Passwords must match
                            </div>
                        </div>
                    </div>
                    <div>
                        <button class="btn btn-primary mr-1">Create User</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
